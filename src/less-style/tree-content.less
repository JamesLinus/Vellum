// Styling for trees (question tree and external data tree)
@import "lib/main";

// Vellum wrappers
.formdesigner .fd-ui-container {

    // Styles shared by both trees
    .jstree {

        .jstree-node {
            // Items in tree (type icon + name)
            .jstree-anchor {
                color: darken(@blueDark, 10);

                &.jstree-hovered,
                &.jstree-clicked {
                    border: none;
                    background: desaturate(lighten(@blue, 58), 40);
                }

                &.jstree-clicked {
                    .box-shadow(0px 0px 4px fade(@blue, 60%));
                }

                .fd-tree-valid-alert-icon {
                    color: lighten(@red, 15);
                    margin-right: 3px;
                    margin-left: -3px;
                }
            }

            .jstree-anchor > .jstree-icon, .add_choice:before {
                background: none;
                font-size: .85em;
                color: @blueLight;
            }

            .add_choice {
                display: block;
                margin-left: 25px;
                cursor: pointer;
                padding: 0 5px;

                // This is fragile; it overwrites .fa styles with .jstree-anchor and body styles
                font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;
                line-height: 24px;
                height: 24px;

                &:before {
                    // Bring back .fa font
                    font: normal normal normal 14px/1 FontAwesome;

                    margin-right: 6px;
                }

                // Also fragile; both because of the static width and because the other styles
                // are taken from .jstree-hovered
                &:hover {
                    border: none;
                    background-color: #eaeff5;
                    width: 95px;
                }
            }

            &.jstree-closed .add_choice {
                display: none;
            }
        }
    }

    // Panel for question tree, including header
    .fd-tree {
        .fd-scrollable {
            overflow-x: auto;

            // Separate tree from header
            .jstree {
                margin: 5px 0;
            }
        }

        .fd-undo-delete {
            margin-bottom: 0px;
        }
    }

    // Panel for external data sources tree, including header
    .fd-external-sources-container {

        // Header for panel
        .fd-head.fd-head-external-sources {
            background-color: @cc-neutral-low;
            cursor: pointer;
        }

        // Area for search
        .fd-external-resource-search {
            background-color: @cc-bg;
            margin-bottom: 5px;
            > form {
                position: relative;
                padding: 0px @contentPaddingVellum;
                i {
                    line-height: 42px;
                }
            }

            // Icon and search box
            .fd-search-control {
                position: absolute;
                top: 5px;
                margin-left: 18px;
                width: 100%;
            }
        }

        // Data tree itemsuse a different color scheme
        .fd-external-sources-tree .jstree-anchor {
            color: @cc-neutral-low;
            &.jstree-clicked {
                background-color: @cc-bg;
                .box-shadow(0px 0px 4px fade(@cc-neutral-mid, 80%));
            }

            > .jstree-icon {
                color: @cc-neutral-mid;
            }
        }
    }
}

#jstree-dnd {
    max-width: 300px;
    .text-overflow();
}
